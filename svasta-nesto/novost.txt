{
	"id": "X6OEUPS0AH_102282",
	"vehicle": {
		"trip": {
			"tripId": "0_30_1710_17_11502",
			"startDate": "20250110",
			"scheduleRelationship": "SCHEDULED",
			"routeId": "17"
		},
		"position": {
			"latitude": 45.796966552734378,
			"longitude": 15.960481643676758
		},
		"timestamp": "1736517938",
		"vehicle": {
			"id": "102282"
		}
	}
}

Neka vozila sada imaju position
Dodani su shapes.txt napokon
Da bi ga koristili trebamo uzeti tripId i pogledati u trips.txt, pronaci taj id i uzeti odgovarajuci shapes_id
potom u shapes txt datoteku i uzeti odgovarajuci

Npr.
"tripId": "0_30_1710_17_11502",
->
route_id,service_id,trip_id,trip_headsign,trip_short_name,direction_id,block_id,shape_id
17,"0_30","0_30_1710_17_11502","Preƒçko",,1,1710,"17_3"

"17_3" je shapes id

shape_id,shape_pt_lat,shape_pt_lon,shape_pt_sequence,shape_dist_traveled
"17_3",45.814549,16.018820,10001,
"17_3",45.814580,16.018643,10002,
"17_3",45.814580,16.018509,10003,
"17_3",45.814535,16.018266,10004,
"17_3",45.814465,16.017886,10005,
"17_3",45.814375,16.017324,10006,
"17_3",45.814398,16.017156,10007,
"17_3",45.814627,16.016580,10008,
"17_3",45.814888,16.015828,10009,
"17_3",45.815179,16.014573,10010,
"17_3",45.815350,16.013487,10011,
"17_3",45.815404,16.013330,10012,
"17_3",45.815404,16.013330,20001,
"17_3",45.815390,16.013338,20002,
"17_3",45.815406,16.013223,20003,
"17_3",45.815466,16.012048,20004,
"17_3",45.815467,16.011152,20005,
"17_3",45.815464,16.011030,20006,
"17_3",45.815443,16.010530,20007,
"17_3",45.815418,16.010242,20008,
"17_3",45.815405,16.010104,20009,
"17_3",45.815374,16.009812,20010,
"17_3",45.815324,16.009611,20011,
"17_3",45.815212,16.009164,20012,
"17_3",45.815022,16.008614,20013,
"17_3",45.815022,16.008614,30001,
"17_3",45.814523,16.007581,30002,
"17_3",45.813981,16.006391,30003,
"17_3",45.813481,16.005134,30004,
"17_3",45.813340,16.004745,30005,
"17_3",45.813340,16.004745,40001,
"17_3",45.812949,16.003732,40002,
"17_3",45.812541,16.002609,40003,
"17_3",45.811839,16.000421,40004,
"17_3",45.811529,15.999339,40005,
"17_3",45.811529,15.999339,50001,
"17_3",45.811348,15.998630,50002,
"17_3",45.811130,15.997723,50003,
"17_3",45.811130,15.997723,60001,
"17_3",45.810809,15.996157,60002,
"17_3",45.810676,15.995434,60003,
"17_3",45.810442,15.993893,60004,
"17_3",45.810315,15.992893,60005,
"17_3",45.810265,15.992276,60006,
"17_3",45.810265,15.992276,70001,
"17_3",45.810225,15.991956,70002,
"17_3",45.810136,15.990913,70003,
"17_3",45.810070,15.989849,70004,
"17_3",45.810049,15.989068,70005,
"17_3",45.810017,15.988361,70006,
"17_3",45.810017,15.988361,80001,
"17_3",45.810020,15.988202,80002,
"17_3",45.810071,15.988111,80003,
"17_3",45.810097,15.988065,80004,
"17_3",45.810177,15.988049,80005,
"17_3",45.810276,15.988037,80006,
"17_3",45.810357,15.988021,80007,
"17_3",45.810432,15.987989,80008,
"17_3",45.810498,15.987888,80009,
"17_3",45.810509,15.987623,80010,
"17_3",45.810482,15.986838,80011,
"17_3",45.810463,15.986460,80012,
"17_3",45.811092,15.985386,80013,
"17_3",45.811805,15.984231,80014,
"17_3",45.811805,15.984231,90001,
"17_3",45.812150,15.983662,90002,
"17_3",45.812183,15.983470,90003,
"17_3",45.812228,15.982722,90004,
"17_3",45.812316,15.981342,90005,
"17_3",45.812444,15.979626,90006,
"17_3",45.812449,15.979267,90007,
"17_3",45.812482,15.978928,90008,
"17_3",45.812525,15.978714,90009,
"17_3",45.812655,15.978297,90010,
"17_3",45.812672,15.978223,90011,
"17_3",45.812901,15.977366,90012,
"17_3",45.813035,15.976493,90013,
"17_3",45.813027,15.976546,90014,
"17_3",45.813013,15.976611,90015,
"17_3",45.813013,15.976611,100001,
"17_3",45.813027,15.976505,100002,
"17_3",45.813042,15.976443,100003,
"17_3",45.813070,15.976051,100004,
"17_3",45.813081,15.974621,100005,
"17_3",45.813174,15.973110,100006,
"17_3",45.813195,15.972112,100007,
"17_3",45.813300,15.970096,100008,
"17_3",45.813303,15.969790,100009,
"17_3",45.813247,15.969678,100010,
"17_3",45.813197,15.969624,100011,
"17_3",45.813078,15.969588,100012,
"17_3",45.812489,15.969484,100013,
"17_3",45.812489,15.969474,110001,
"17_3",45.811841,15.969386,110002,
"17_3",45.809333,15.968867,110003,
"17_3",45.809335,15.968878,120001,
"17_3",45.809120,15.968790,120002,
"17_3",45.806120,15.966744,120003,
"17_3",45.805964,15.966604,120004,
"17_3",45.805964,15.966604,130001,
"17_3",45.805956,15.966616,130002,
"17_3",45.805747,15.966487,130003,
"17_3",45.802896,15.964541,130004,
"17_3",45.802581,15.964327,130005,
"17_3",45.802430,15.964203,130006,
"17_3",45.802432,15.964208,140001,
"17_3",45.802290,15.964136,140002,
"17_3",45.798715,15.961705,140003,
"17_3",45.798714,15.961709,150001,
"17_3",45.797873,15.961127,150002,
"17_3",45.796510,15.960194,150003,
"17_3",45.796513,15.960185,160001,
"17_3",45.796124,15.959934,160002,
"17_3",45.793393,15.958061,160003,
"17_3",45.793393,15.958061,170001,
"17_3",45.792780,15.957656,170002,
"17_3",45.790392,15.956029,170003,
"17_3",45.790392,15.956029,180001,
"17_3",45.790212,15.955914,180002,
"17_3",45.788494,15.954737,180003,
"17_3",45.788493,15.954741,190001,
"17_3",45.787280,15.953891,190002,
"17_3",45.787177,15.953794,190003,
"17_3",45.787112,15.953654,190004,
"17_3",45.786997,15.953407,190005,
"17_3",45.786898,15.953138,190006,
"17_3",45.786764,15.952469,190007,
"17_3",45.786778,15.952366,190008,
"17_3",45.786778,15.952366,200001,
"17_3",45.786686,15.952098,200002,
"17_3",45.786364,15.950626,200003,
"17_3",45.786340,15.950285,200004,
"17_3",45.786325,15.949879,200005,
"17_3",45.786343,15.949565,200006,
"17_3",45.786405,15.949114,200007,
"17_3",45.786560,15.948558,200008,
"17_3",45.786780,15.947954,200009,
"17_3",45.787014,15.947394,200010,
"17_3",45.787266,15.946931,200011,
"17_3",45.787584,15.946465,200012,
"17_3",45.788034,15.945981,200013,
"17_3",45.788109,15.945855,200014,
"17_3",45.788172,15.945686,200015,
"17_3",45.788193,15.945437,200016,
"17_3",45.788210,15.944801,200017,
"17_3",45.788246,15.944677,200018,
"17_3",45.788246,15.944677,210001,
"17_3",45.788198,15.944557,210002,
"17_3",45.788211,15.940347,210003,
"17_3",45.788248,15.940171,210004,
"17_3",45.788248,15.940171,220001,
"17_3",45.788211,15.940066,220002,
"17_3",45.788197,15.937588,220003,
"17_3",45.788215,15.937461,220004,
"17_3",45.788215,15.937461,230001,
"17_3",45.788186,15.937251,230002,
"17_3",45.788147,15.936450,230003,
"17_3",45.788104,15.936009,230004,
"17_3",45.788014,15.935581,230005,
"17_3",45.787808,15.934732,230006,
"17_3",45.787412,15.933280,230007,
"17_3",45.787338,15.932925,230008,
"17_3",45.787298,15.932605,230009,
"17_3",45.787297,15.932190,230010,
"17_3",45.787332,15.931891,230011,
"17_3",45.787437,15.931414,230012,
"17_3",45.787793,15.930059,230013,
"17_3",45.787793,15.930059,240001,
"17_3",45.787926,15.929565,240002,
"17_3",45.788082,15.928955,240003,
"17_3",45.788260,15.928137,240004,
"17_3",45.788364,15.927432,240005,
"17_3",45.788786,15.924479,240006,
"17_3",45.789105,15.922274,240007,
"17_3",45.789163,15.921901,240008,
"17_3",45.789232,15.921588,240009,
"17_3",45.789359,15.921184,240010,
"17_3",45.789897,15.920016,240011,
"17_3",45.789897,15.920016,250001,
"17_3",45.790907,15.917784,250002,
"17_3",45.791155,15.917069,250003,
"17_3",45.791347,15.916429,250004,
"17_3",45.791526,15.915652,250005,
"17_3",45.791643,15.914857,250006,
"17_3",45.791679,15.914639,250007,
"17_3",45.791718,15.914076,250008,
"17_3",45.791855,15.912901,250009,
"17_3",45.791856,15.912901,260001,
"17_3",45.791994,15.911429,260002,
"17_3",45.792616,15.905243,260003,
"17_3",45.792615,15.905246,270001,
"17_3",45.792773,15.903537,270002,
"17_3",45.792883,15.902929,270003,
"17_3",45.793178,15.901972,270004,
"17_3",45.793220,15.901904,270005,
"17_3",45.793221,15.901902,280001,
"17_3",45.793240,15.901802,280002,
"17_3",45.794375,15.898475,280003,
"17_3",45.794374,15.898481,290001,
"17_3",45.794442,15.898222,290002,
"17_3",45.794561,15.897601,290003,
"17_3",45.794636,15.897101,290004,
"17_3",45.794688,15.896582,290005,
"17_3",45.794716,15.895681,290006,
"17_3",45.794674,15.895040,290007,
"17_3",45.794623,15.894610,290008,
"17_3",45.794519,15.894005,290009,
"17_3",45.794263,15.892713,290010,
"17_3",45.794266,15.892595,290011,


ima 280 entity s vehicle positionom
dok 461 samo s trip updateom

2 vrste entiteta

S pozicijom pogledaj id dijeli ga s tripupdate entietom
{
			"id": "X4OEUPS02E_102227",
			"vehicle": {
				"trip": {
					"tripId": "0_30_804_8_10519",
					"startDate": "20250110",
					"scheduleRelationship": "SCHEDULED",
					"routeId": "8"
				},
				"position": {
					"latitude": 45.79172134399414,
					"longitude": 16.002605438232423
				},
				"timestamp": "1736523130",
				"vehicle": {
					"id": "102227"
				}
			}
		},


I entitet s tripupdate odnosno kad je dosao na koju stanicu 
{
			"id": "X4OEUPS02E",
			"tripUpdate": {
				"trip": {
					"tripId": "0_30_804_8_10519",
					"startDate": "20250110",
					"scheduleRelationship": "SCHEDULED",
					"routeId": "8"
				},
				"stopTimeUpdate": [
					{
						"stopSequence": 13,
						"arrival": {
							"delay": -98,
							"time": "1736523049"
						},
						"departure": {
							"delay": -98,
							"time": "1736523049"  -- Friday, January 10, 2025 4:30:49 PM
						},
						"stopId": "115_4",
						"scheduleRelationship": "SCHEDULED"
					},
					{
						"stopSequence": 15,
						"arrival": {
							"delay": -158,
							"time": "1736523182"
						},
						"departure": {
							"delay": -158,
							"time": "1736523182" -- Friday, January 10, 2025 4:33:02 PM
						},
						"stopId": "1729_4",
						"scheduleRelationship": "SCHEDULED"
					}
				],
				"timestamp": "1736523130"
			}
		}
		
Kada ima vise tih stop time udpates uzimati zadnji u arr, mozes i vrijeme provjeriti


[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:01
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:01
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:01
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:01
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:11
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:11
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:11
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:11
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:11
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:22
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:22
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:22
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:22
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:22
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:22
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:33
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:33
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:33
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:33
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:33
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:44
[Info] Data refreshed
Feed timestamp: 10. 01. 2025. 18:37:44
[Info] Data refreshed


CREATE TABLE stopUpdates (
  hash TEXT PRIMARY KEY,
  id TEXT,
  tripId TEXT,
  routeId TEXT,
  stopId TEXT,
	currentStopSequence INT,
  arrivedAt TIMESTAMP,
  reportedDelay INTEGER
);
